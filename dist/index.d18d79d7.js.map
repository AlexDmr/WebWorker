{"mappings":"eAAsBA,EAAWC,GAC/B,MAAMC,cAAmBC,MAAMF,IAAIG,OAE7BC,EAAO,IAAIC,KAAM,CAACJ,GAAM,CAACK,KAAM,2BACrC,OAAOC,IAAIC,gBAAgBJ,GCC7B,MAIMK,EAAQC,SAASC,cAAc,SACrC,IAAIC,EAAG,GACP,IAAK,IAAIC,EANG,EAMMA,EALN,GAKeA,IACzBD,GAAG,sBAA0BC,iCAE/BJ,EAAMK,UAAYF,EAGlB,MAAMG,EAAKL,SAASC,cAAc,UAGlCK,QAAQC,IAAI,CAAClB,EAAW,oBAAqBA,EAAW,sBAAsBmB,MAAI,EAAIC,EAAIC,MACxF,MAAMC,EAAK,IAAIC,OAAQH,GACjBI,EAAK,IAAID,OAAQF,GAEvBL,EAAGS,QAAO,mBAIMH,EAAYE,GAC5BF,EAAGI,YAAY,GACfF,EAAGE,YAAY,GAEfJ,EAAGK,UAAaC,IACdjB,SAASC,cAAa,sBAAuBgB,EAAIC,KAAKC,GA5B9C,EA4ByD,sBAAsBC,YAAcC,KAAKC,UAAUL,EAAIC,MACpHD,EAAIC,KAAKC,GA5BL,IA6BNR,EAAGI,YAAaE,EAAIC,KAAKC,GAAK,IAGlCN,EAAGG,UAAaC,IACdjB,SAASC,cAAa,sBAAuBgB,EAAIC,KAAKC,GAlC9C,EAkCyD,sBAAsBC,YAAcC,KAAKC,UAAUL,EAAIC,MACpHD,EAAIC,KAAKC,GAlCL,IAmCNN,EAAGE,YAAaE,EAAIC,KAAKC,GAAK,IAIlCR,EAAGY,QAAUC,QAAQC,MACrBZ,EAAGU,QAAUC,QAAQC,MAtBFC,CAAGf,EAAIE","sources":["utils.ts","index.ts"],"sourcesContent":["export async function loadAsBlob(f: string): Promise<string> {\r\n  const str = await (await fetch(f)).text();\r\n  // console.log(f, \":\", str);\r\n  const blob = new Blob( [str], {type: 'application/javascript'} );\r\n  return URL.createObjectURL(blob);\r\n}\r\n","// Import stylesheets\nimport './style.css';\nimport { loadAsBlob } from './utils';\n\n// MIN an MAX values for computing Fibonnacci\nconst MIN = 2;\nconst MAX = 50;\n\n// Pre-fill the table\nconst tbody = document.querySelector(\"tbody\");\nlet str = ``;\nfor (let i = MIN; i < MAX; i++) {\n  str += `<tr><td>Fibonnacci(${i})</td><td></td><td></td></tr>`;\n}\ntbody.innerHTML = str;\n\n// Get button reference\nconst bt = document.querySelector(\"button\");\n\n// Load and create 2 workers, subscribe to the button to start computation\nPromise.all([loadAsBlob('./fibonnacci1.ts'), loadAsBlob('./fibonnacci2.ts')]).then( ([b1, b2]) => {\n  const w1 = new Worker( b1 );\n  const w2 = new Worker( b2 );\n\n  bt.onclick = () => go(w1, w2);\n} );\n\n// Function that will handle compuatation distribution\nasync function go(w1: Worker, w2: Worker) {\n  w1.postMessage(2);\n  w2.postMessage(2);\n\n  w1.onmessage = (msg) => {\n    document.querySelector(`table tr:nth-child(${msg.data.nb - MIN + 1}) td:nth-child(2)`).textContent = JSON.stringify(msg.data);\n    if (msg.data.nb < MAX) {\n      w1.postMessage( msg.data.nb + 1 );\n    }\n  }\n  w2.onmessage = (msg) => {\n    document.querySelector(`table tr:nth-child(${msg.data.nb - MIN + 1}) td:nth-child(3)`).textContent = JSON.stringify(msg.data);\n    if (msg.data.nb < MAX) {\n      w2.postMessage( msg.data.nb + 1 );\n    }\n  }\n\n  w1.onerror = console.error;\n  w2.onerror = console.error;\n}\n\n\n"],"names":["$37bdf143f0f0bf9e$export$28f2ce48a2693cb1","f","str","fetch","text","blob","Blob","type","URL","createObjectURL","$fe37914a1f066cda$var$tbody","document","querySelector","$fe37914a1f066cda$var$str","i","innerHTML","$fe37914a1f066cda$var$bt","Promise","all","then","b1","b2","w1","Worker","w2","onclick","postMessage","onmessage","msg","data","nb","textContent","JSON","stringify","onerror","console","error","$fe37914a1f066cda$var$go"],"version":3,"file":"index.d18d79d7.js.map"}